# Best practices

## commits

Those can serve as guidelines for both the code changes and the commit messages. But be wary that it's always more important to follow your company or team's standard than following those ones. It's more important to agree on standards than have your own ones.

### Small commits

Small commits make it easier to read and understand code changes.
Also it allows to separate intents. Each independent part of the code should be split in a separate commit.
	
### Commit Often

Committing often keeps your commits small and, helps you commit only related changes. That way it‘s easier for everyone to integrate changes regularly and avoid merge conflicts. Having large commits and sharing them infrequently, in contrast, makes it hard to solve conflicts.

### But don't commit half of your logic

Only commit code when a component is finished.
Best is to split your implementation in smaller chunks that you can commit separately. If you‘re tempted to commit just because you need a clean working copy (to check out a branch, pull in changes, etc.) consider using Git‘s «Stash» feature instead.

### Tests are important
Test your code before commit. It should not have an impact on existing features while working exactly like it is meant to. While committing half-baked things in your local repository only requires you to forgive yourself, having your code tested is even more important when it comes to pushing/sharing your code with others.

### Write Good Commit Messages

Begin your message with a summary of your changes (up to 50 characters as a guideline). And add a blank line to separate it from the detailed body of your message. This body should answer the following questions :
– What was the motivation for the change ?
- What were the initial requirements ?
– How does it differ from the previous implementation ?
- Is the feature complete ?

Use the imperative, present tense («change», not «changed» or «changes») to be consistent with generated messages from commands like git merge.
Follow your projects standard. If you use jira or a ticket system, it's always good to put a reference to it.

### Use Branches

Branches allow you to commit independently from other ongoing works.

### Workflows

Git lets you pick from a lot of different workflows which one you choose depends on a couple of factors: your project, your development and deployment workflows and (maybe most importantly) you and your teammates‘ personal preferences. However you choose to work, just make sure to agree on a common workflow that everyone follows as it's more important to have defined standards that will ease the comprehension of each's work than have different ways of working patched together.

#### long-running branches

They are usually used in case a development environment is needed before the main branch. It allows for more security and isolation of the master branch but also means more merges and reviews.

#### topic branches

Short-lived branches that are meant for features, bugfixes, hotfixes or any well-defined and scoped task before being merged.

#### trunk based development

trunk based development is a version control management system broadly used nowadays.
Its principle is short-lived branches that are often merged into a main branch. It allows for a single point of entry for CI/CD flows, quick road to prod and minimal maintenance.

#### git-flow

Git-flow is an older management system where you use multiple branches directly in PROD. It allows for modular implementation, maintenance of separate versions and is usually a more complex git ecosystem. It is less broadely used in modern software but might still be a good choice depending on the type of software you are working on.

## Formatting Rules

- Capitalized, short __(50 chars or less)__ summary

- More detailed explanatory text, if necessary.  __Wrap it to about 72 characters__.  In some contexts, the first line is treated as the subject of an email and the rest of the text as the body.  The blank line separating the summary from the body is critical (unless you omit the body entirely); tools like rebase can get confused if you run the two together.

- __Always leave the second line blank.__

- Write your commit message in the imperative: "Fix bug" and not "Fixed bug" or "Fixes bug."  This convention matches up with commit messages generated by commands like git merge and git revert.

- Further paragraphs come after blank lines.
    - Bullet points are okay, too
    - Typically a hyphen or asterisk is used for the bullet, preceded by a single space, with blank lines in between, but conventions vary here
    - Use a hanging indent

### Examples of good practice

__Example 1__ (no description, only summary)

```
  commit 3114a97ba188895daff4a3d337b2c73855d4632d
  Author: [removed]
  Date:   Mon Jun 11 17:16:10 2012 +0100

    Update default policies
```

__Example 2__ (description as bullet points)
```
  commit ae878fc8b9761d099a4145617e4a48cbeb390623
  Author: [removed]
  Date:   Fri Jun 1 01:44:02 2012 +0000

    Refactor libvirt create calls

     - Minimize duplicated code for create

     - Make wait_for_destroy happen on shutdown

     - Allow for destruction of an instance while leaving the domain
```

__Example 3__ (description as plain text)

```
  commit 31336b35b4604f70150d0073d77dbf63b9bf7598
  Author: [removed]
  Date:   Wed Jun 6 22:45:25 2012 -0400

    Add CPU arch filter scheduler support

    In a mixed environment of running different CPU architectures,
    one would not want to run an ARM instance on a X86_64 host and
    vice versa.

    This scheduler filter option will prevent instances running
    on a host that it is not intended for.

    The libvirt driver queries the guest capabilities of the
    host and stores the guest arches in the permitted_instances_types
    list in the cpu_info dict of the host.

    The Xen equivalent will be done later in another commit.

    The arch filter will compare the instance arch against
    the permitted_instances_types of a host
    and filter out invalid hosts.

    Also adds ARM as a valid arch to the filter.

    The ArchFilter is not turned on by default.
```
